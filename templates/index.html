<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Is SIKE broken yet?</title>
    <meta name="description"
          content="A knowledge base of most isogeny based cryptosystems and the best attacks on them." />
    <link rel="canonical" href="https://issikebrokenyet.github.io" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="Is SIKE broken yet?" />
    <meta property="og:description" 
          content="A knowledge base of most isogeny based cryptosystems and the best attacks on them." />
    <meta property="og:url" content="https://issikebrokenyet.github.io/" />
    <meta property="og:site_name" content="Is SIKE broken yet?" />
    <meta property="og:image" content="https://issikebrokenyet.github.io/isby.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Is SIKE broken yet?" />
    <meta name="twitter:description" 
          content="A knowledge base of most isogeny based cryptosystems and the best attacks on them." />
    <meta name="twitter:site" content="https://issikebrokenyet.github.io" />
    <meta name="twitter:image" content="https://issikebrokenyet.github.io/isby.png" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="style.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
    	  tex2jax: {
          inlineMath: [['$','$']]
        },
        asciimath2jax: {
          delimiters: [['$','$']]
        }
      });
    </script>
    <script type="text/javascript" async
	    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  <body>
    <h1>Is SIKE broken yet?</h1>
    <h2 id="schemes">Schemes</h2>
    <div class="table-div">
      <table>
        <thead>{{ schemes_head | safe }}</thead>
        <tbody>{{ schemes | safe }}</tbody>
      </table>
    </div>
    <h2 id="assumptions">Assumptions</h2>
    <div class="table-div">
      <table>
        <thead>{{ assumptions_head | safe }}</thead>
        <tbody>{{ assumptions | safe }}</tbody>
      </table>
    </div>
    <h2 id="attacks">Attacks</h2>
    <div class="table-div">
      <table>
        <thead>{{ attacks_head | safe }}</thead>
        <tbody>{{ attacks | safe }}</tbody>
      </table>
    </div>
    <footer>
      <a href="https://github.com/issikebrokenyet/issikebrokenyet.github.io/">Contribute on GitHub</a>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <button id="theme-toggle" class="btn-theme-toggle">Change theme</button>
    </footer>
  </body>

  <script>
    // Select all comment checkboxes with the name using querySelectorAll.
    var commentCheckboxes = document.querySelectorAll("input[type=checkbox][name=comment-checkbox]");

    // Use Array.forEach to add an event listener to each checkbox.
    commentCheckboxes.forEach(function(checkbox) {
      checkbox.addEventListener('change', function() {
        const checkboxId = this.id;
        const commentId = checkboxId.replace("!checkbox", "");
        const commentEle = document.getElementById(commentId);
        commentEle.classList.toggle("hidden-row");
      })
    });

    // Select all checkboxes with the name 'settings' using querySelectorAll.
    var variantCheckboxes = document.querySelectorAll("input[type=checkbox][name=variant-checkbox]");

    // Use Array.forEach to add an event listener to each checkbox.
    variantCheckboxes.forEach(function(checkbox) {
      checkbox.addEventListener('change', function() {
        const checkboxId = this.id;
        const variantClassName = checkboxId.replace("!checkbox", "");
        var variantElements = document.getElementsByClassName(variantClassName);

        Array.prototype.forEach.call(variantElements, function(variantElement) {
          variantElement.classList.toggle("hidden-row");
          
          // Nasty hack so that if a variant is hidden while a comment is open
          // We close the comment.
          commentId = "comment-" + variantElement.id
          commentCheckboxId = commentId + "!checkbox";

          // Grab the comment
          variantComment = document.getElementById(commentId);
          // If the variant is currently visible AND we have hidden the variant
          // Hide the comment and remove the check from the checkbox.
          if (!variantComment.classList.contains("hidden-row") && 
               variantElement.classList.contains("hidden-row")){
              document.getElementById(commentCheckboxId).click()  
          }
        });
      });
    });
    
    // Allow touch control for abbr elements
    var abbr_elements = document.querySelectorAll("abbr");
    // Use Array.forEach to add an event listener to each abbr element.
    abbr_elements.forEach(function(abbr_element) {
      // Show label on touch
      abbr_element.addEventListener('touchstart', function() {
        abbr_element.classList.toggle("touched");
      });
      // hide element when finger lifted after 2s delay
      abbr_element.addEventListener('touchend', function() {
        setTimeout(function () {
          if (abbr_element.classList.contains("touched")) {
              abbr_element.classList.remove("touched");
          }
        }, 2000);
      })
    });

    // Deal with dark/light theme
    var toggle = document.getElementById("theme-toggle");
    var storedTheme = localStorage.getItem('theme') || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
    if (storedTheme){
        document.documentElement.setAttribute('data-theme', storedTheme)
        buttonText = (storedTheme == "light" ? "Dark Theme" : "Light Theme")
        toggle.innerText = buttonText;
    }
    else{
        document.documentElement.setAttribute('data-theme', "light");
        toggle.innerText = "Dark Theme";
    }

    toggle.onclick = function() {
        var currentTheme = document.documentElement.getAttribute("data-theme");
        var targetTheme = "light";

        if (currentTheme === "light") {
            targetTheme = "dark";
        }

        document.documentElement.setAttribute('data-theme', targetTheme)
        localStorage.setItem('theme', targetTheme);
        buttonText = (targetTheme == "light" ? "Dark Theme" : "Light Theme")
        toggle.innerText = buttonText;
    };
  </script>
</html>
